<!DOCTYPE html>
<html lang = "it">
<head>
    <meta charset = "UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale = 1.0">
    <title>registrati</title>
     
    <!--Favicon -->
    <link rel="icon" href="../assets/favicon.png" type="image/png">

    <!--css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font-->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- css -->
    <link rel = "stylesheet" href = "css/registrati_style.css">

    <!-- Sweet Alert--> 
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

</head>

<script> 
    function checkPassword(){
        pw = document.getElementById("password").value;
        conf_pw = document.getElementById("conferma_password").value;

        if (pw != conf_pw){
            swal({
            title: "Errore",
            text: "Le due password non concidono!",
            icon: "error"
            });
            return false; 
        }
        return true; 
    }
</script>

<body> 
<div class="container d-flex justify-content-center align-items-center vh-100">
        <div class="card p-4 shadow" style="min-width: 300px; max-width: 400px; width: 100%;">

            <h2 class = "text-center fw-bold mb-4"> Registrati </h2>

            
            <form method= "POST" action= "php/registrati.php" class = "register-form" onsubmit="return checkPassword()">

                <!-- mb = margin bottom -->
                <div class = "mb-3" >
                    <input type = "text" placeholder = "nome" id = "nome" name = "nome" class="form-control"required>
                </div>
                <div class = "mb-3" >
                    <input type = "text" placeholder = "cognome" id = "cognome" name = "cognome" class="form-control"required>
                </div>

                <div class = "mb-3" >
                    <input type = "email" placeholder = "email" id = "email" name = "email" class="form-control"required>
                </div>
            
                <div class = "mb-3">
                    <input type = "text" placeholder = "username" id = "username" name = "username" class="form-control" required>
                </div>

                <div class = "mb-3" >
                    <input type = "password" placeholder = "password"  id = "password" name = "password" class="form-control" required>
                </div>

                <div class = "mb-3" >
                    <input type = "password" placeholder = "conferma_password" id = "conferma_password" name = "conferma_password" class="form-control" required>
                </div>

            <button class = "btn btn-success w-100" type = "submit" name = "registrati"> Registrati </button>

            
            <p class="text-center mb-3 p-3"> Hai già un account? <a href = "login.html"> Clicca qui </a></p>


            </form>
        </div>
    </div>

 <script>
  const params = new URLSearchParams(window.location.search);
  if (params.get("error") === "1") {
    swal({
      title: "Errore",
      text: "Email già utilizzata. Riprova",
      icon: "error"
    });
  }

   if (params.get("error") === "2") {
    swal({
      title: "Errore",
      text: "l'iscrizione non è andata a buon fine. Riprova",
      icon: "error"
    });
  }
</script>

</body>